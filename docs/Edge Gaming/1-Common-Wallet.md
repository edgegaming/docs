---
tags: [Edge Gaming, Common Wallet]
---

![Edge Gaming](../../assets/images/edge_gaming/logo.jpg)

# Common Wallet

## Overview

This document describes the service integration between **Gaming (provider)** and an **operator**. The following chapters describe the general concept of integration as well as descriptions and examples of the API methods used for the service integration.

### General Notes

- Data Format: JSON (JavaScript Object Notation)
- Wallet Option: Common Wallet (a.k.a. Seamless Wallet)
- **Operator** - Referred as the operator
- **Provider** - Referred as the game provider
- **Host ID** - This Host ID is an unique token generated from game provider for each game operator 
- **Points** - Referred as the game points; not player's actual wallet balance.
- The operator manages the user account database (personal information, balance, wallet operations, etc.)
- The provider only manages the player data necessary to perform game operation.
- All methods support uses **HTTPS GET** verb in the system.
- Players perform all betting and gaming by using Operator's wallet system. Therefore, **operator** need to develop and integrate EG API .

### Getting started

To be able to connect to our game server, **operator** needs to provide the following API for us to communicate between game server and operator site. Players perform all betting and gaming by using operator's own wallet system.

- [Authenticate (O)](#authenticate)
- [Bet (O)](#bet)
- [Result (O)](#result)
- [Refund Bet (O)](#refund-bet)
- [Game Launch](#game-launch)
- [User Report](#user-report)

**(O) is referred to API that is required to be develop by operator.

## API 

### Authenticate

Authenticate API is called upon launching the game for the logged-in player. **Operator needs to implement this API for user verification**.

<!--
type: tab
title: Docs
-->

### Request

| Name         | Type   | Description                                                                    |
| ------------ | ------ | ------------------------------------------------------------------------------ |
| access_token | string | The access token is generated by operator system for the player’s session.     |


> ##### Example
>
> https://{OPERATOR_API_ENDPOINT}/api/user/authenticate?{access_token}

### Response

| Name        | Type   | Description                                                                             |
| ----------- | ------ | --------------------------------------------------------------------------------------- |
| status_code | int    | Response status code                                                                    |
| member_id   | string | Unique ID of the player                                                                 |
| balance     | uint64 | Current **Balance** of the player (in cents)                                            |
| currency    | string | Currency code is referred to ISO 4217                                                                          |

#### Status Code

| Code | Description   |
| ---- | ------------- |
| 0    | Success       |
| 1    | Invalid Token |

<!--
type: tab
title: Examples
-->

### Sample Success Response

```json
{
  "status_code": 0,
  "member_id": "demo01",
  "balance": 100000,
  "currency": "MYR"
}
```

### Sample Error Response

```json
{
  "status_code": 1,
  "message": "Invalid Token"
}
```

<!--
type: tab
title: Try It
-->

```json http
{
  "method": "get",
  "url": "https://{OPERATOR_API_ENDPOINT}/api/user/authenticate",
  "query": {
    "access_token": "{access_token}"
  }
}
```

<!-- type: tab-end -->

---

### Bet

When the game places a bet, it will call  **Operator's API** to deduct player's wallet. **Operator needs to implement this API for betting operation**.

<!--
type: tab
title: Docs
-->

### Request

| Name         | Type   | Description                                                                    |
| ------------ | ------ | ------------------------------------------------------------------------------ |
| access_token | string | The access token is generated by operator system for the player's session.     |
| ticket_id    | uint64 | Unique ID of the transaction on the Operator side.                             |
| total_bet    | uint64 | Total betting **POINTS** (in Cents)                                            |
| bet_info     | string | Betting info(opponent's name)                                                  |
| bet_value    | string | Betting value                                                                  |

> ##### Example
>
> <https://{OPERATOR_API_ENDPOINT}/api/bet?access_token={access_token}&ticket_id={ticket_id}&total_bet={total_bet}&bet_info={bet_info}&bet_value={bet_value}>

### Response

| Name        | Type   | Description                                                                            |
| ----------- | ------ | -------------------------------------------------------------------------------------- |
| status_code | int    | Response status code                                                                   |
| balance     | uint64 | Current **POINTS** of the player (in cents)                                            |

#### Status Code

| Code | Description            |
| ---- | ---------------------- |
| 0    | Success                |
| 1    | Invalid Token          |
| 2    | Invalid Transaction ID |
| 3    | Insufficient Funds     |

<!--
type: tab
title: Examples
-->

### Sample Success Response

```json
{
  "status_code": 0,
  "balance": 100000
}
```

### Sample Error Response

```json
{
  "status_code": 1,
  "message": "Invalid token"
}
```

<!--
type: tab
title: Try It
-->

```json http
{
  "method": "get",
  "url": "https://{OPERATOR_API_ENDPOINT}/api/bet",
  "query": {
    "access_token": "{access_token}",
    "ticket_id": "{ticket_id}",
    "total_bet": 10000,
    "bet_info": "{bet_info}",
    "bet_value": "{bet_value}"
  }
}
```

<!-- type: tab-end -->

### Result

When the game provider has the result return, it will call Result API. This  API will be called despite a winning bet or losing bet. If it’s a losing bet, the total win is return as 0. Otherwise, the total win amount will be returned. **Operator needs to implement this API for each bet result**.

<!--
type: tab
title: Docs
-->

### Request

| Name         | Type   | Description                                                                                                                                                                                                                                                                        |
| ------------ | ------ | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| access_token | string | The access token is generated by operator system for the player's session.                                                                                                                                                                                                             |
| ticket_id    | uint64 | Unique ID of the transaction on the Operator side.                                                                                                                                                                                                                                     |
| total_win    | uint64 | Total winning **POINTS** (in Cents)                                                                                                                                                                                                                                                    |
| winner       | string | Info of the winner(name of the winner) |

> ##### Example
>
> <https://{OPERATOR_API_ENDPOINT}/api/result?access_token={access_token}&ticket_id={ticket_id}&total_win={total_win}&winner={winner}>

### Response

| Name        | Type   | Description                                                                            |
| ----------- | ------ | -------------------------------------------------------------------------------------- |
| status_code | int    | Response status code                                                                   |
| balance     | uint64 | Current **POINTS** of the player (in cents)                                            |

#### Status Code

| Code | Description            |
| ---- | ---------------------- |
| 0    | Success                |
| 1    | Invalid Token          |
| 2    | Invalid Transaction ID |

<!--
type: tab
title: Examples
-->

### Sample Success Response

```json
{
  "status_code": 0,
  "balance": 100000
}
```

### Sample Error Response

```json
{
  "status_code": 1,
  "message": "Invalid token"
}
```

<!--
type: tab
title: Try It
-->

```json http
{
  "method": "get",
  "url": "https://{OPERATOR_API_ENDPOINT}/api/result",
  "query": {
    "access_token": "{access_token}",
    "ticket_id": "{ticket_id}",
    "total_win": 10000,
    "winner": "{winner}"
  }
}
```

<!-- type: tab-end -->

### Refund Bet

This API is called to cancel the latest Bet if system error occurred. **Operator needs to implement this API for refund purpose**.

<!--
type: tab
title: Docs
-->

### Request

| Name         | Type   | Description                                                                    |
| ------------ | ------ | ------------------------------------------------------------------------------ |
| access_token | string | The access token is generated by operator system for the player's session.     |
| ticket_id    | uint64 | Unique ID of the transaction on the Operator side.                             |

> ##### Example
>
> <https://{OPERATOR_API_ENDPOINT}/api/refund?access_token={access_token}&ticket_id={ticket_id}>

### Response

| Name        | Type   | Description                                                                            |
| ----------- | ------ | -------------------------------------------------------------------------------------- |
| status_code | int    | Response status code                                                                   |
| balance     | uint64 | Current **POINTS** of the player (in cents)                                            |

#### Status Code

| Code | Description            |
| ---- | ---------------------- |
| 0    | Success                |
| 1    | Invalid Token          |
| 2    | Invalid Transaction ID |

<!--
type: tab
title: Examples
-->

### Sample Success Response

```json
{
  "status_code": 0,
  "balance": 100000
}
```

### Sample Error Response

```json
{
  "status_code": 1,
  "message": "Invalid token"
}
```

<!--
type: tab
title: Try It
-->

```json http
{
  "method": "get",
  "url": "https://{OPERATOR_API_ENDPOINT}/api/refund",
  "query": {
    "access_token": "{access_token}",
    "ticket_id": "{ticket_id}"
  }
}
```

<!-- type: tab-end -->

## Game Launch

For launching games, please refer to the URL parameters as below.

<!--
type: tab
title: Docs
-->

### Request

| Name           | Type   | Description                                                                         |
| -------------- | ------ | ----------------------------------------------------------------------------------- |
| host_id        | string | Unique ID of Operator System (provided by game provider)                                |
| access_token   | string | The access token is generated by operator system for the player's session.      |

> If host_id and access_token is not provided, it is treated as **Guest** mode.
>
> ##### Example
>
> <https://{GAME_URL}?host_id={host_id}&access_token={access_token}>

<!-- type: tab-end -->

## User Report

This API is called to retrieve the game report from Game Server. **Operator** must maintain the key to keep track log request. For the first time to request log, key = 0. The response return the key value to **operator** for the next log request.

<!--
type: tab
title: Docs
-->

### Request

| Name    | Type   | Description                                          |
| ------- | ------ | ---------------------------------------------------- |
| host_id | string | Unique ID of Operator System (provided by game provider) |
| key     | string | Unique database index number                         |

> If key is empty, it will return data from index zero (0).
>
> ##### Example
>
> <https://{PROVIDER_API_ENDPOINT}/api/report?host_id={host_id}&key={key}>

### Response

| Name        | Type  | Description          |
| ----------- | ----- | -------------------- |
| status_code | int   | Response status code |
| report      | array | A list report        |

#### Status Code

| Code | Description     |
| ---- | --------------- |
| 0    | Success         |
| 2    | Invalid Host ID |

<!--
type: tab
title: Examples
-->

### Sample Success Response

```json
{
  "data": {
    "status_code": 0,
    "report": [
      {
        "id": "1",
        "event_id": 139204,
        "session_id": 13922,
        "slot_id": 7,
        "opponent_1": "",
        "opponent_2": "",
        "user_id": "1",
        "bet_value": "The Blade",
        "bet_odds": 1.85,
        "bet_odds_type": "EU",
        "bet_stake": 0,
        "deductable_amount": 3.7,
        "potential_payout": 3.7,
        "bet_result": "0",
        "bet_amount": 0,
        "payout_amount": 0,
        "gain_amount": 0,
        "loss_amount": 0,
        "draw_amount": 0,
        "cancel_amount": 0,
        "reject_amount": 0,
        "status": "done",
        "created_at": "2016-07-29 12:40:46"
      }
    ],
    "key": "13"
  }
}
```

### Sample Error Response

```json
{
  "error": {
    "status_code": 2,
    "message": "Invalid Host ID"
  }
}
```

<!--
type: tab
title: Try It
-->

```json http
{
  "method": "get",
  "url": "https://{PROVIDER_API_ENDPOINT}/api/report",
  "query": {
    "host_id": "{host_id}",
    "key": "{key}"
  }
}
```

<!-- type: tab-end -->
